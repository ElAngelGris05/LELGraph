{
  "name": "LEL",
  "version": "1.0",
  "trigger": {
    "type": "schedule",
    "cron": "* 1 * * * *"
  },
  "tasks": {
    "P贸liza": {
      "type": "lib",
      "runner_type": "python",
      "action": "turbine_twitter.get_time_line",
      "retries": 2,
      "params": {
        "asset": "twitter",
        "inputs": {
          "count": 50
        }
      },
      "publish": {
        "pipe": "result"
      },
      "on-success": ["Br贸ker"]
    },
    "Aseguradora": {
      "type": "lib",
      "runner_type": "python",
      "action": "turbine_intsagram.get_time_line",
      "retries": 2,
      "params": {
        "asset": "instagram",
        "inputs": {
          "count": 50
        }
      },
      "publish": {
        "pipe": "result"
      },
      "on-success": ["Beneficiario"]
    },
    "Br贸ker": {
      "type": "lib",
      "runner_type": "python",
      "action": "turbine_pipe.extract_value",
      "retries": 2,
      "params": {
        "inputs": {
          "mask": "([0-9]{1,3}\\.){3}[0-9]{1,3}"
        },
        "map": {
          "get_twitter_post.text": "text"
        }
      },
      "publish": {
        "pipe": "result"
      },
      "on-success": ["Beneficiario"]
    },
    "Beneficiario": {
      "type": "lib",
      "runner_type": "python",
      "action": "turbine_threat_connect.get_ioc_batch",
      "retries": 2,
      "params": {
        "asset": "threat_connect",
        "inputs": {
          "owner": "Common Community"
        },
        "pipe": null,
        "map": {
          "Br贸ker.value": "indicator"
        }
      },
      "publish": {
        "pipe": "result"
      },
      "on-success": ["Cliente"],
      "on-error": ["Siniestro"]
    },
    "Cliente": {
      "type": "lib",
      "runner_type": "python",
      "retries": 2,
      "action": "turbine_pipe.render_template",
      "params": {
        "inputs": {
          "template":
            "TC reports {{name}} is {{description}}. Rating {{rating}}. {{url}}"
        },
        "map": {
          "Beneficiario.name": "name",
          "Beneficiario.description": "description",
          "Beneficiario.rating": "rating",
          "Beneficiario.url": "url"
        }
      },
      "publish": {
        "pipe": "result"
      },
      "on-success": ["Siniestro"]
    },
    "Siniestro": {
      "type": "lib",
      "runner_type": "python",
      "retries": 2,
      "action": "turbine_slack.post_messages",
      "params": {
        "asset": "slack",
        "inputs": {
          "channel": "#turbine"
        },
        "map": {
          "Cliente.value": "message"
        }
      }
    }
  }
}
